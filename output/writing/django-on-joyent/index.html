<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<link href='/static/css/application.css' media='screen' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Alegreya:400italic,400,700|Inconsolata' rel='stylesheet' type='text/css'>
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

<script type="text/javascript">
    // first, create the object that contains
    // configuration variables
    MTIConfig = {};

    // next, add a variable that will control
    // whether or not FOUT will be prevented
    MTIConfig.EnableCustomFOUTHandler = true // true = prevent FOUT
</script>
<title>
A (Complete) Guide to Running Django on Joyent Shared Accelerators using Virtualenv, pip, git, and NginX | Evan Carmi
</title>
<link href="/writing/feed.xml" type="application/atom+xml" rel="alternate" title="Writing ATOM Feed">
<meta content='nanoc' name='generator'>
<meta content='Evan Carmi' name='author'>
<meta content='A guide to installing a &lt;a href="http://www.djangoproject.com/" title="A kick-ass Python Web framework"&gt;Django&lt;/a&gt; application on a Joyent Shared Accelerator inside a &lt;a href="http://virtualenv.openplans.org/" title="A tool to create isolated Python environments"&gt;Virtualenv&lt;/a&gt; using &lt;a href="http://pip.openplans.org/" title="pip installs packages. Python packages."&gt;pip&lt;/a&gt;, &lt;a href="http://git-scm.com/" title="A distributed version control system"&gt;git&lt;/a&gt; and &lt;a href="http://nginx.org/" title="An HTTP server"&gt;NginX&lt;/a&gt;' name='description'>
</head>
<body>
<div class='container'>
<header class='post'>
<div class='header-contents'>
<hgroup class='article-metadata'>
By
<span class='author'>
<a href='https://ecarmi.org'>
Evan Carmi
</a>
</span>
&#183;
<span class='post-date'>
Posted
<time class="timeago created-at" datetime="2011-01-24T00:00:00-08:00">January 24, 2011</time>
</span>
</hgroup>
<h1 class='title'>A (Complete) Guide to Running Django on Joyent Shared Accelerators using Virtualenv, pip, git, and NginX</h1>
</div>
</header>
<article class='post'>
<div class="toc"> 
<ul> 
<li><a href="#getting-started-setting-up-your-development-environment">Getting started: setting up your development environment</a><ul> 
<li><a href="#install-django-inside-a-virtualenv">Install Django inside a virtualenv</a></li> 
<li><a href="#create-a-git-repository">Create a git repository</a></li> 
<li><a href="#use-requirements-and-pip-freeze">Use requirements and pip freeze</a></li> 
</ul> 
</li> 
<li><a href="#deploying-getting-your-app-on-the-server">Deploying: getting your app on the server</a><ul> 
<li><a href="#install-virtualenv-on-joyent">Install virtualenv on Joyent</a></li> 
<li><a href="#upload-your-application-to-the-server">Upload your application to the server</a></li> 
<li><a href="#install-packages-on-the-server-with-pip">Install packages on the server with pip</a></li> 
<li><a href="#setup-static-media">Setup static media</a></li> 
<li><a href="#setup-nginx-and-fastcgi">Setup NginX and FastCGI</a></li> 
</ul> 
</li> 
<li><a href="#coming-soon">Coming Soon</a></li> 
</ul> 
</div> 
<p>In this guide we&#8217;ll go over the process of deploying a <a href="http://www.djangoproject.com/" title="A kick-ass Python Web framework">Django</a> application on a <a href="http://www.joyent.com/" title="A web host where I have a lifetime account">Joyent</a> Shared Accelerator (now called SmartMachines).</p> 
<p>We&#8217;ll be using the following tools:</p> 
<ul> 
<li><em><a href="http://virtualenv.openplans.org/" title="A tool to create isolated Python environments">Virtualenv</a></em> - to isolate our Python environment and manage software versions.</li> 
<li><em><a href="http://pip.openplans.org/" title="pip installs packages. Python packages.">pip</a></em> - to install packages.</li> 
<li><em><a href="http://git-scm.com/" title="A distributed version control system">git</a></em> - for version control</li> 
<li><em><a href="http://nginx.org/" title="An HTTP server">NginX</a></em> - to serve our Django site through FastCGI.</li> 
</ul> 
<h1 id="getting-started-setting-up-your-development-environment">Getting started: setting up your development environment</h1> 
<p>Let&#8217;s setup our development environment on our local machine using <a href="http://virtualenv.openplans.org/" title="A tool to create isolated Python environments">Virtualenv</a> and <a href="http://pip.openplans.org/" title="pip installs packages. Python packages.">pip</a>.</p> 
<div class="codehilite"><pre><span class="nv">$ </span>virtualenv --no-site-packages mysite
<span class="nv">$ </span><span class="nb">cd </span>mysite/
<span class="nv">$ </span>. bin/activate
<span class="nv">$ </span>pip --version
pip 0.8.2 from /home/evan/mysite/lib/python2.6/site-packages <span class="o">(</span>python 2.6<span class="o">)</span> 
</pre></div> 
 
 
<p>Inside your virtualenv upgrade pip.</p> 
<div class="codehilite"><pre>pip install --upgrade pip
</pre></div> 
 
 
<h2 id="install-django-inside-a-virtualenv">Install Django inside a virtualenv</h2> 
<p>Note: If your application is already inside a virtualenv with packages installed by pip you can skip down to the <a href="#deploying-getting-your-app-on-the-server">Deploying</a> section below.</p> 
<p>Let&#8217;s install the latest stable release of Django (1.2.4 as of today) using pip.</p> 
<div class="codehilite"><pre><span class="nv">$ </span>pip install Django
Downloading/unpacking Django
  Downloading Django-1.2.4.tar.gz <span class="o">(</span>6.4Mb<span class="o">)</span>: 6.4Mb downloaded
  Running setup.py egg_info <span class="k">for </span>package Django
Installing collected packages: Django
  Running setup.py install <span class="k">for </span>Django
    changing mode of build/scripts-2.6/django-admin.py from 644 to 755
    changing mode of /home/evan/mysite/bin/django-admin.py to 755
Successfully installed Django
Cleaning up...
</pre></div> 
 
 
<p>Create a new project, myproject, here. It should be in the same directory as bin, include, and lib that were created by virtualenv.</p> 
<div class="codehilite"><pre><span class="nv">$ </span>django-admin.py startproject myproject
<span class="nv">$ </span><span class="nb">cd </span>myproject/
<span class="nv">$ </span>django-admin.py runserver
Error: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined.
</pre></div> 
 
 
<p>Oops! We&#8217;re getting an error because Django cannot find and import our settings.py file. Let&#8217;s fix that by putting our project directory into the virtualenv&#8217;s site-packages directory with a symbolic link:</p> 
<div class="codehilite"><pre><span class="nv">$ </span>ln -s <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span> ../lib/python2.6/site-packages/<span class="sb">`</span>basename <span class="se">\`</span><span class="nb">pwd</span><span class="se">\`</span><span class="sb">`</span> 
</pre></div> 
 
 
<p>If you are using a different version of Python change <code>python2.6</code> to reflect that version.</p> 
<p>And then defining the <code>DJANGO_SETTINGS_MODULE</code> environment variable. Also, let&#8217;s make it so this environment variable is set every time we activate the virtualenv.</p> 
<div class="codehilite"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">DJANGO_SETTINGS_MODULE</span><span class="o">=</span>myproject.settings
<span class="nv">$ </span><span class="nb">echo</span> <span class="s2">&quot;!!&quot;</span> &gt;&gt; ../bin/activate
</pre></div> 
 
 
<p>Now let&#8217;s try the <code>runserver</code> command again.</p> 
<div class="codehilite"><pre><span class="nv">$ </span>django-admin.py runserver
Validating models...
0 errors found
 
Django version 1.2.4, using settings <span class="s1">&#39;myproject.settings&#39;</span> 
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
</pre></div> 
 
 
<p>Great! Everything is working.</p> 
<h2 id="create-a-git-repository">Create a git repository</h2> 
<p>We want to create our git repository inside the myproject directory to track our Django application.</p> 
<div class="codehilite"><pre><span class="nv">$ </span>git init .
Initialized empty Git repository in /home/evan/mysite/myproject/.git/
<span class="nv">$ </span><span class="nb">echo</span> <span class="s2">&quot;My Django app for Joyent&quot;</span> &gt; README
<span class="nv">$ </span>git add README
<span class="nv">$ </span>git commit -m <span class="s2">&quot;Initialzed repository and added README&quot;</span> 
<span class="o">[</span>master <span class="o">(</span>root-commit<span class="o">)</span> 7d09bd1<span class="o">]</span> Initialzed repository and added README
1 files changed, 1 insertions<span class="o">(</span>+<span class="o">)</span>, 0 deletions<span class="o">(</span>-<span class="o">)</span> 
create mode 100644 README
</pre></div> 
 
 
<p>Here you should create your application. I&#8217;ll just use the <a href="http://docs.djangoproject.com/en/dev/intro/tutorial01/" title="A tutorial to learn Django">Django Tutorial</a> for now.</p> 
<h2 id="use-requirements-and-pip-freeze">Use requirements and pip freeze</h2> 
<p>We want to create a list of all the necessary packages for our project. The <code>pip freeze</code>command can help us with this, but we can&#8217;t just use every package from the list because some packages like <em>fabric</em> and <em>paramiko</em> won&#8217;t successfully install on the Share Accelerator.</p> 
<p>My REQUIREMENTS file is very short:</p> 
<div class="codehilite"><pre><span class="nv">$ </span>cat REQUIREMENTS 
<span class="nv">Django</span><span class="o">==</span>1.2.4
django-debug-toolbar<span class="o">==</span>0.8.4
<span class="nv">wsgiref</span><span class="o">==</span>0.1.2
</pre></div> 
 
 
<p>Great. Let&#8217;s get this app running on Joyent.</p> 
<h1 id="deploying-getting-your-app-on-the-server">Deploying: getting your app on the server</h1> 
<p>First off, login to your virtualmin page (my server, harbor, is at <a href="https://virtualmin.joyent.us/harbor/">https://virtualmin.joyent.us/harbor/</a> )and create a virtual server for your new site if you haven&#8217;t yet.</p> 
<p>Now you should create a database. I&#8217;d recommend creating a PostgreSQL database. If you&#8217;d like you can also create a separate user to access the database with. For simplicity, I&#8217;ll just use my main user account for now.</p> 
<h2 id="install-virtualenv-on-joyent">Install virtualenv on Joyent</h2> 
<p>To use <code>virtualenv</code> on your server you need to first get it on your server. We&#8217;ll download it from <a href="http://pypi.python.org/pypi" title="The Python Package Index">PyPi</a>.</p> 
<p><code>ssh</code> in to your server and:</p> 
<div class="codehilite"><pre><span class="nv">$ </span>mkdir -p <span class="nb">local</span>/
<span class="nv">$ </span><span class="nb">cd local</span>/
<span class="nv">$ </span>wget -O virtualenv-1.5.1.tar.gz http://pypi.python.org/packages/source/v/virtualenv/virtualenv-1.5.1.tar.gz
<span class="nv">$ </span>tar xzvf virtualenv-1.5.1.tar.gz
</pre></div> 
 
 
<p>Let&#8217;s now create our virtualenv on our server. This is the same as on our local machine.</p> 
<div class="codehilite"><pre><span class="nv">$ </span>python virtualenv.py --no-site-packages ~/django_projects/mysite
<span class="nv">$ </span><span class="nb">cd</span> ~/django_projects/mysite/
<span class="nv">$ </span>. bin/activate
</pre></div> 
 
 
<h2 id="upload-your-application-to-the-server">Upload your application to the server</h2> 
<p>Now, get your project directory inside this newly created virtualenv. It really doesn&#8217;t matter how. If you&#8217;re using <a href="http://github.com/" title="Hosted git repositories">github</a> you might want to <a href="http://help.github.com/deploy-keys/" title="A github help page on using deploy keys">create a deploy key</a> These days, this seems to be the preferred way to deploy.</p> 
<p>If you&#8217;re using github, clone your project with:</p> 
<div class="codehilite"><pre><span class="nv">$ </span>git clone git@github.com:carmi/mysite.git
Initialized empty Git repository in /users/home/carmi/django_projects/mysite/mysite/.git/
</pre></div> 
 
 
<p>Great! Now we should have our project directory myproject inside our virtualenv on the same level as <code>bin</code>, <code>lib</code> and <code>include</code>. Make sure you&#8217;ve modified your settings file for production and updated the database settings to use your PostgreSQL database instead of sqlite3. My databases looks like:</p> 
<div class="codehilite"><pre><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span> 
    <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span> 
        <span class="s">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s">&#39;postgresql_psycopg2&#39;</span><span class="p">,</span> 
        <span class="s">&#39;NAME&#39;</span><span class="p">:</span> <span class="s">&#39;carmi_django_mysite_database&#39;</span><span class="p">,</span> 
        <span class="s">&#39;USER&#39;</span><span class="p">:</span> <span class="s">&#39;carmi&#39;</span><span class="p">,</span> 
        <span class="s">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s">&#39;password&#39;</span><span class="p">,</span> 
        <span class="s">&#39;HOST&#39;</span><span class="p">:</span> <span class="s">&#39;localhost&#39;</span><span class="p">,</span> 
        <span class="s">&#39;PORT&#39;</span><span class="p">:</span> <span class="s">&#39;5432&#39;</span><span class="p">,</span> 
    <span class="p">}</span> 
<span class="p">}</span> 
</pre></div> 
 
 
<p>Try running <code>django-admin.py syncdb</code>. If it works then your database is configured correctly.</p> 
<p>Setup the server&#8217;s virtualenv.:</p> 
<div class="codehilite"><pre><span class="nv">$ </span><span class="nb">cd</span> ~/django_projects/mysite/myproject/
<span class="nv">$ </span>ln -s <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span> ../lib/python2.6/site-packages/<span class="sb">`</span>basename <span class="se">\`</span><span class="nb">pwd</span><span class="se">\`</span><span class="sb">`</span> 
span class="nv">$ </span><span class="nb">export </span><span class="nv">DJANGO_SETTINGS_MODULE</span><span class="o">=</span>myproject.settings
<span class="nv">$ </span><span class="nb">echo</span> <span class="s2">&quot;!!&quot;</span> &gt;&gt; ../bin/activate
</pre></div> 
 
 
<h2 id="install-packages-on-the-server-with-pip">Install packages on the server with pip</h2> 
<p>Let&#8217;s install the packages in our REQUIREMENTS file.</p> 
<div class="codehilite"><pre><span class="nv">$ </span>pip install -r REQUIREMENTS
</pre></div> 
 
 
<p>We will need <a href="http://trac.saddi.com/flup" title="A random collection of WSGI modules">flup</a> and psycopg2 (for PostgreSQL). Let&#8217;s install those:</p> 
<div class="codehilite"><pre><span class="nv">$ </span>pip install flup psycopg2
</pre></div> 
 
 
<h2 id="setup-static-media">Setup static media</h2> 
<p>Let&#8217;s assume you have some static media for your project in <code>~/django_projects/mysite/myproject/media/</code></p> 
<p>For security reasons (but don&#8217;t trust me on this) we don&#8217;t want to serve static media (CSS, Javacsript) from inside our project directory. Instead, let&#8217;s create some other directories to serve static media from:</p> 
<div class="codehilite"><pre><span class="nv">$ </span>mkdir -p ~/django_projects/mysite/web/public
</pre></div> 
 
 
<p>And then create a symbolic link from there to our media directory.</p> 
<div class="codehilite"><pre><span class="nv">$ </span>ln -s ~/django_projects/mysite/myproject/media/ ~/django_projects/mysite/web/public/media
</pre></div> 
 
 
<p>Now let&#8217;s link Django&#8217;s <code>contrib.admin</code> media to this location:</p> 
<div class="codehilite"><pre><span class="nv">$ </span>ln -s ~/django_projects/mysite/lib/python2.6/site-packages/django/contrib/admin/media/ ~/django_projects/mysite/myproject/media/admin
</pre></div> 
 
 
<p>And lastly let&#8217;s configure our <code>settings.py</code> to use these locations:</p> 
<div class="codehilite"><pre><span class="n">MEDIA_URL</span> <span class="o">=</span> <span class="s">&#39;/media/&#39;</span> 
<span class="n">ADMIN_MEDIA_PREFIX</span> <span class="o">=</span> <span class="s">&#39;/media/admin/&#39;</span> 
</pre></div> 
 
 
<h2 id="setup-nginx-and-fastcgi">Setup NginX and FastCGI</h2> 
<p>Now let&#8217;s get <a href="http://nginx.org/" title="An HTTP server">NginX</a> running.</p> 
<p>Create a <code>nginx.conf</code> file inside your site directory:</p> 
<div class="codehilite"><pre><span class="nv">$</span> <span class="nv">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">~</span><span class="sr">/django_projects/m</span><span class="n">ysite</span><span class="sr">/etc/</span> 
<span class="nv">$</span> <span class="nv">vim</span> <span class="o">~</span><span class="sr">/django_projects/m</span><span class="n">ysite</span><span class="sr">/etc/</span><span class="n">nginx</span><span class="o">.</span><span class="n">conf</span> 
</pre></div> 
 
 
<p>Edit your <code>nginx.conf</code> file to look like the following but with your own <a href="http://wiki.joyent.com/shared:ports" title="Joyent wiki page on Managing Ports">port number</a>, domain, and username. In the example my port is <code>10071</code>, my domain is <code>django.joyeurs.com</code>, and my username is <code>carmi</code>:</p> 
<div class="codehilite"><pre><span class="k">events</span> <span class="p">{</span> 
    <span class="kn">worker_connections</span>  <span class="mi">24</span><span class="p">;</span> 
<span class="p">}</span> 
 
<span class="k">http</span> <span class="p">{</span> 
    <span class="kn">include</span>     <span class="s">/opt/local/etc/mime.types</span><span class="p">;</span> 
    <span class="kn">default_type</span>  <span class="s">application/octet-stream</span><span class="p">;</span> 
 
    <span class="kn">server</span> <span class="p">{</span> 
        <span class="kn">listen</span>       <span class="mi">10071</span><span class="p">;</span> 
        <span class="kn">server_name</span>  <span class="s">django.joyeurs.com</span><span class="p">;</span> 
 
        <span class="kn">location</span> <span class="s">/media</span> <span class="p">{</span> 
            <span class="kn">root</span>   <span class="s">/users/home/carmi/django_projects/mysite/web/public</span><span class="p">;</span> 
        <span class="p">}</span> 
 
        <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span> 
            <span class="kn">fastcgi_pass</span> <span class="s">unix:/users/home/carmi/django_projects/mysite/myproject/myproject.socket</span><span class="p">;</span> 
 
            <span class="c1"># fastcgi parameters</span> 
            <span class="kn">fastcgi_param</span> <span class="s">PATH_INFO</span> <span class="nv">$fastcgi_script_name</span><span class="p">;</span> 
            <span class="kn">fastcgi_param</span> <span class="s">QUERY_STRING</span> <span class="nv">$query_string</span><span class="p">;</span> 
            <span class="kn">fastcgi_param</span> <span class="s">REQUEST_METHOD</span> <span class="nv">$request_method</span><span class="p">;</span> 
            <span class="kn">fastcgi_param</span> <span class="s">SERVER_PORT</span> <span class="nv">$server_port</span><span class="p">;</span> 
            <span class="kn">fastcgi_param</span> <span class="s">SERVER_PROTOCOL</span> <span class="nv">$server_protocol</span><span class="p">;</span> 
            <span class="kn">fastcgi_param</span> <span class="s">SERVER_NAME</span> <span class="nv">$server_name</span><span class="p">;</span> 
            <span class="kn">fastcgi_param</span> <span class="s">CONTENT_TYPE</span> <span class="nv">$content_type</span><span class="p">;</span> 
            <span class="kn">fastcgi_param</span> <span class="s">CONTENT_LENGTH</span> <span class="nv">$content_length</span><span class="p">;</span> 
        <span class="p">}</span>    
    <span class="p">}</span>   
<span class="p">}</span> 
</pre></div> 
 
 
<p>Create an <code>init.sh</code> script in your project directory to start the Django FastCGI process that should look like:</p> 
<div class="codehilite"><pre><span class="c">#!/usr/local/bin/bash</span> 
 
<span class="c">#Activate the virtualenv</span> 
<span class="nb">source</span> /users/home/carmi/django_projects/mysite/bin/activate
 
<span class="nv">PROJECT_NAME</span><span class="o">=</span><span class="s2">&quot;myproject&quot;</span> 
<span class="nv">PROJECT_DIR</span><span class="o">=</span><span class="s2">&quot;/users/home/carmi/django_projects/mysite/myproject&quot;</span> 
<span class="nv">PID_FILE</span><span class="o">=</span><span class="s2">&quot;/users/home/carmi/django_projects/mysite/myproject/myproject.pid&quot;</span> 
<span class="nv">SOCKET_FILE</span><span class="o">=</span><span class="s2">&quot;/users/home/carmi/django_projects/mysite/myproject/myproject.socket&quot;</span> 
<span class="nv">BIN_PYTHON</span><span class="o">=</span><span class="s2">&quot;/users/home/carmi/django_projects/mysite/bin/python&quot;</span> 
<span class="nv">DJANGO_ADMIN</span><span class="o">=</span><span class="s2">&quot;/users/home/carmi/django_projects/mysite/bin/django-admin.py&quot;</span> 
<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&quot;maxchildren=2 maxspare=2 minspare=1&quot;</span> 
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">&quot;prefork&quot;</span> 
 
<span class="k">case</span> <span class="s2">&quot;$1&quot;</span> in
    start<span class="o">)</span> 
      <span class="c"># Starts the Django process</span> 
      <span class="nb">echo</span> <span class="s2">&quot;Starting Django project&quot;</span> 
      <span class="nv">$BIN_PYTHON</span> <span class="nv">$DJANGO_ADMIN</span> runfcgi <span class="nv">$OPTIONS</span> <span class="nv">method</span><span class="o">=</span><span class="nv">$METHOD</span> <span class="nv">socket</span><span class="o">=</span><span class="nv">$SOCKET_FILE</span> <span class="nv">pidfile</span><span class="o">=</span><span class="nv">$PID_FILE</span> 
  ;;  
    stop<span class="o">)</span> 
      <span class="c"># stops the daemon by cating the pidfile</span> 
      <span class="nb">echo</span> <span class="s2">&quot;Stopping Django project&quot;</span> 
      <span class="nb">kill</span> <span class="sb">`</span>/bin/cat <span class="nv">$PID_FILE</span><span class="sb">`</span> 
  ;;  
    restart<span class="o">)</span> 
      <span class="c">## Stop the service regardless of whether it was</span> 
      <span class="c">## running or not, start it again.</span> 
      <span class="nb">echo</span> <span class="s2">&quot;Restarting process&quot;</span> 
      <span class="nv">$0</span> stop
      <span class="nv">$0</span> start
  ;;  
    *<span class="o">)</span>  
      <span class="nb">echo</span> <span class="s2">&quot;Usage: init.sh (start|stop|restart)&quot;</span> 
      <span class="nb">exit </span>1
  ;;  
<span class="k">esac</span> 
</pre></div> 
 
 
<p>You&#8217;ll need to make this <code>init.sh</code> file executable:</p> 
<div class="codehilite"><pre><span class="nv">$ </span>chmod +x ~/django_projects/mysite/myproject/init.sh
</pre></div> 
 
 
<p>Startup the Django FastCGI instance with:</p> 
<div class="codehilite"><pre><span class="nv">$ </span>~/django_projects/mysite/myproject/init.sh start
</pre></div> 
 
 
<p>This script also takes <code>start</code>, <code>stop</code>, and <code>restart</code> as parameters.</p> 
<p>Now launch NginX with your configuration file:</p> 
<div class="codehilite"><pre><span class="nv">$ </span>/usr/local/sbin/nginx -p /users/home/carmi/ -c /users/home/carmi/django_projects/mysite/etc/nginx.conf
</pre></div> 
 
 
<p>We should now having our Django application running. Go to <a href="http://domain.com:PORTNUBMER/">http://domain.com:PORTNUBMER/</a> to see it. For my app, we can login to the admin interface by going to: <a href="http://django.joyeurs.com:10071/admin/">http://django.joyeurs.com:10071/admin/</a></p> 
<p>Now, in virtualmin create bootup actions to start the Django FastCGI process and NginX on server reboots.</p> 
<p>Great! We&#8217;ve just covered setting up a Django application on a Joyent Shared Accelerator using virtualenv, pip, NginX, and git.</p> 
<p>Please let me know if something is not working, or if you&#8217;d just like to leave some feedback.</p> 
<h1 id="coming-soon">Coming Soon</h1> 
<p>Wait a second! This is a long guide. Are we really all going to repeat the same steps over and over? Coming soon is a python script to automate this entire install process. Stay posted.</p> 

<p class='prev'>

</p>
<p class='next'>
<a class="next" title="Printing a hardcopy of source code in LaTeX" href="/writing/print-source-code/">Next &rarr;</a>
</p>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
 var disqus_developer = 1; // developer mode is on
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'ecarmi'; // required: replace example with your forum shortname

  // The following are highly recommended additional parameters. Remove the slashes in front to use.
  var disqus_identifier = '/writing/django-on-joyent/';
  var disqus_title = 'A (Complete) Guide to Running Django on Joyent Shared Accelerators using Virtualenv, pip, git, and NginX';
  var disqus_url = 'https://ecarmi.org/writing/django-on-joyent/';

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</article>

</div>
<footer>
<div class='footer-div'>
<div class='footer-contents'>
<section>
<aside>
<h6>Whose site is this?</h6>
</aside>
<article>
<p>This is the digital abode of Evan Carmi. <a title="About" href="/about/">Moreover...</a>.</p>
</article>
</section>
<section>
<aside>
<h6>Have thoughts?</h6>
</aside>
<article>
<script async src='//easyform.io/assets/embed.js'></script>
<form id="contact-form" action="//easyform.io/e44d9aea04bbaadceb9cbb8a412116e1" method="POST">
  <input type="email" name="replyto" placeholder="Put your email here..." required>
  <textarea name="message" rows="2" placeholder="Put your opinion here..." required></textarea>
  <input type="text" name="_gotcha" style="display:none">
  <input type="hidden" name="subject" value="[submission] Hello from ecarmi.org" />
  <input type="submit" value="Send">
</form>
</article>
</section>
<section>
<aside>
<h6>How was the site made?</h6>
</aside>
<article>
<p>Evan Carmi designed and coded this site by hand with love in <a href="https://github.com/carmi/dotfiles/blob/master/.vimrc">Vim</a>.  It is powered by <a href="http://nanoc.stoneship.org/">Nanoc</a> and served by <a href="http://nginx.org/">Nginx</a> on the <a href="http://joyent.com/">Joyent Cloud</a>. The complete source code is <a href="https://github.com/carmi/ecarmi.org-nanoc">online</a>.</p>
</article>
</section>
</div>
<p class='social-links'>
<a title="Home" href="/"><i class="fa fa-home"></i></a>
<a title="Github" rel="me" href="https://github.com/carmi/"><i class="fa fa-github"></i></a>
<a title="Twitter" rel="me" href="https://twitter.com/ehc"><i class="fa fa-twitter"></i></a>
<a title="LinkedIn" rel="me" href="http://www.linkedin.com/in/evancarmi"><i class="fa fa-linkedin"></i></a>
</p>
</div>
</footer>

<!-- / Javascript -->
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src='/static/js/combined.js' type='text/javascript'></script>
<!-- GA -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-27458554-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End GA -->

<script type='text/javascript'>
jQuery(document).ready(function() {
jQuery("time.timeago").timeago();
});
</script>
</body>
</html>
