<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<link href='/static/css/application.css' media='screen' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Alegreya:400italic,400,700|Inconsolata' rel='stylesheet' type='text/css'>
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

<script type="text/javascript">
    // first, create the object that contains
    // configuration variables
    MTIConfig = {};

    // next, add a variable that will control
    // whether or not FOUT will be prevented
    MTIConfig.EnableCustomFOUTHandler = true // true = prevent FOUT
</script>
<title>
Next and Previous Links in Nanoc | Evan Carmi
</title>
<link href="/writing/feed.xml" type="application/atom+xml" rel="alternate" title="Writing ATOM Feed">
<meta content='nanoc' name='generator'>
<meta content='Evan Carmi' name='author'>
<meta content='How to add next and previous links to a post using Nanoc' name='description'>
</head>
<body>
<div class='container'>
<header class='post'>
<div class='header-contents'>
<hgroup class='article-metadata'>
By
<span class='author'>
<a href='https://ecarmi.org'>
Evan Carmi
</a>
</span>
&#183;
<span class='post-date'>
Posted
<time class="timeago created-at" datetime="2013-03-23T00:00:00-07:00">March 23, 2013</time>
</span>
</hgroup>
<h1 class='title'>Next and Previous Links in Nanoc</h1>
</div>
</header>
<article class='post'>
<p>Note: this was tested in Nanoc 3.6.1</p>

<p>I’ve seen a few questions (and a few incorrect answers) about how to get next and previous links for a given item in <a href="http://nanoc.ws/">Nanoc</a>. If you are using the <a href="http://nanoc.ws/docs/api/Nanoc/Helpers/Blogging.html">blogging</a> module in Nanoc you can access all your articles in sorted order by descending creation date. Using this we can create a quick helper for next and previous links.</p>

<p>Add the following to your helpers, usually <code>lib/default.rb</code> or <code>lib/helpers.rb</code>:</p>

<pre><code class="language-ruby"><span class="k">def</span> <span class="nf">previous_link</span>
  <span class="n">prev</span> <span class="o">=</span> <span class="n">sorted_articles</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="vi">@item</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="n">prev_article</span> <span class="o">=</span> <span class="n">sorted_articles</span><span class="o">[</span><span class="n">prev</span><span class="o">]</span>
  <span class="k">if</span> <span class="n">prev_article</span><span class="o">.</span><span class="n">nil?</span>
    <span class="s1">''</span>
  <span class="k">else</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">prev_article</span><span class="o">[</span><span class="ss">:title</span><span class="o">]</span>
    <span class="n">html</span> <span class="o">=</span> <span class="s2">"&amp;larr; Previous"</span>
    <span class="n">link_to</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">prev_article</span><span class="o">.</span><span class="n">reps</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">"previous"</span><span class="p">,</span> <span class="ss">:title</span> <span class="o">=&gt;</span> <span class="n">title</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">next_link</span>
  <span class="n">nxt</span> <span class="o">=</span> <span class="n">sorted_articles</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="vi">@item</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
  <span class="k">if</span> <span class="n">nxt</span> <span class="o">&lt;</span> <span class="mi">0</span>
    <span class="s1">''</span>
  <span class="k">else</span>
    <span class="n">post</span> <span class="o">=</span> <span class="n">sorted_articles</span><span class="o">[</span><span class="n">nxt</span><span class="o">]</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">post</span><span class="o">[</span><span class="ss">:title</span><span class="o">]</span>
    <span class="n">html</span> <span class="o">=</span> <span class="s2">"Next &amp;rarr;"</span>
    <span class="n">link_to</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">post</span><span class="o">.</span><span class="n">reps</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">"next"</span><span class="p">,</span> <span class="ss">:title</span> <span class="o">=&gt;</span> <span class="n">title</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre>

<p>It’s important to note that <code>sorted_articles</code> returns an array where <code>sorted_articles[0]</code> is the newest article. So if you want to get the next (newer) article you want to decrement the current index.</p>

<p>Once you have this in a helper module, you can use it in your layout with <code>previous_link</code>. My <a href="https://github.com/carmi/ecarmi.org-nanoc/blob/develop/layouts/post.haml">post layout</a> is in <a href="http://haml.info/">Haml</a> so it looks like:</p>

<pre><code class="language-haml"><span class="nt">%article</span><span class="nc">.post</span>
  <span class="p">=</span> <span class="k">yield</span>

  <span class="nt">%p</span><span class="nc">.prev</span>
    <span class="p">=</span> <span class="n">previous_link</span>
  <span class="nt">%p</span><span class="nc">.next</span>
    <span class="p">=</span> <span class="n">next_link</span></code></pre>

<p>I use this on this blog, and you can check out the full source on <a href="https://github.com/carmi/ecarmi.org-nanoc">github</a>.</p>


<p class='prev'>
<a class="previous" title="Hiring Beginning Programmers" href="/writing/hiring-beginning-programmers/">&larr; Previous</a>
</p>
<p class='next'>
<a class="next" title="Manage Resque Job Queues in YAML" href="/writing/manage-resque-jobs-yaml/">Next &rarr;</a>
</p>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
 var disqus_developer = 1; // developer mode is on
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'ecarmi'; // required: replace example with your forum shortname

  // The following are highly recommended additional parameters. Remove the slashes in front to use.
  var disqus_identifier = '/writing/next-previous-links-nanoc/';
  var disqus_title = 'Next and Previous Links in Nanoc';
  var disqus_url = 'https://ecarmi.org/writing/next-previous-links-nanoc/';

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</article>

</div>
<footer>
<div class='footer-div'>
<div class='footer-contents'>
<section>
<aside>
<h6>Whose site is this?</h6>
</aside>
<article>
<p>This is the digital abode of Evan Carmi. <a title="About" href="/about/">Moreover...</a>.</p>
</article>
</section>
<section>
<aside>
<h6>Have thoughts?</h6>
</aside>
<article>
<script async src='//easyform.io/assets/embed.js'></script>
<form id="contact-form" action="//contact.ecarmi.org/e44d9aea04bbaadceb9cbb8a412116e1" method="POST">
  <input type="email" name="replyto" placeholder="Put your email here..." required>
  <textarea name="message" rows="2" placeholder="Put your opinion here..." required></textarea>
  <input type="text" name="_gotcha" style="display:none">
  <input type="hidden" name="subject" value="[submission] Hello from ecarmi.org" />
  <input type="submit" value="Send">
</form>
</article>
</section>
<section>
<aside>
<h6>How was the site made?</h6>
</aside>
<article>
<p>Evan Carmi designed and coded this site by hand with love in <a href="https://github.com/carmi/dotfiles/blob/master/.vimrc">Vim</a>.  It is powered by <a href="http://nanoc.stoneship.org/">Nanoc</a> and served by <a href="http://nginx.org/">Nginx</a> on the <a href="http://joyent.com/">Joyent Cloud</a>. The complete source code is <a href="https://github.com/carmi/ecarmi.org-nanoc">online</a>.</p>
</article>
</section>
</div>
<p class='social-links'>
<a title="Home" href="/"><i class="fa fa-home"></i></a>
<a title="Github" rel="me" href="https://github.com/carmi/"><i class="fa fa-github"></i></a>
<a title="Twitter" rel="me" href="https://twitter.com/ehc"><i class="fa fa-twitter"></i></a>
<a title="LinkedIn" rel="me" href="http://www.linkedin.com/in/evancarmi"><i class="fa fa-linkedin"></i></a>
</p>
</div>
</footer>

<!-- / Javascript -->
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src='/static/js/combined.js' type='text/javascript'></script>
<!-- GA -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-27458554-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End GA -->

<script type='text/javascript'>
jQuery(document).ready(function() {
jQuery("time.timeago").timeago();
});
</script>
</body>
</html>
